# Gotcha
JavaScript car game.
This library has the main purpose to show something about JavaScript Object Oriented development but for more detail I suggest to start from the Mozilla Guide, https://developer.mozilla.org/en-US/docs/Web/JavaScript/Introduction_to_Object-Oriented_JavaScript.

<b>COMPONENTS</b><br>
This library works around two third party ones:<br>
<b>CreateJS</b> - http://createjs.com/Home - A suite of modular libraries and tools which work together or independently to enable rich interactive content on open web technologies via HTML5.
In simple words it's a container of 4 other specialized libraries: EaselJS, TweenJS, SoundJS, PreloadJS.
Quoting their summaries:<br>
<i>EaselJS</i> - A JavaScript library that makes working with the HTML5 Canvas element easy. Useful for creating games, generative art, and other highly graphical experiences.<br>
<i>TweenJS</i> - A simple but powerful JavaScript library for tweening and animating HTML5 and JavaScript properties. Works stand-alone or integrated with EaselJS.<br>
<i>SoundJS</i> - A JavaScript library that provides a simple API, and powerful features to make working with audio a breeze. Easily ties in audio file loading to PreloadJS.<br>
<i>PreloadJS</i> - A JavaScript library that lets you manage and co-ordinate the loading of assets. Built in plugin model to assist with preloading in other CreateJS libraries.<br>

<b>Collision-Detection-for-EaselJS</b> - https://github.com/olsn/Collision-Detection-for-EaselJS - It'a a library that offers two simple methods to check bounding box bitmap collision and pixel perfect collision.

<b>THE GAME</b><br>
The container of everything is of course the variable 'game'. Inside there are classes, events, methods and resources.<br>
To stay simple for now the external resources are included in this package but it requires few changes to load them from an url request.<br>
The Track is generated by reading a matrix and creating two Tiles for each cell code, one for the background, and one with the actual path where the cars will move.<br>
The Cars have one image that is rotated depending the direction and the there are continuous listners for collisions between cars, track, powerup, ecc...<br>

<b>RULES</b><br>
Depending on the direction of the track (by default all clock round but you can change it in 'resource.js'), you have to catch the other car and get 1 point.
Random powerup will be generated to increase this chance.<br>
Have fun!<br>

<b>HOW TO RUN</b><br>
The folder 'game' contains all the files needed to run the game. All starts from the index.html wihch contains a bone structure for the menu and an empty canvas and invokes game.init() on the body.onload().<br>
For now I splited the JS files to make more readble the code, but as soon as it will be completed it will be replaced with a single minified library.<br>
You can place the game on your hosting web server and it's ready to play, just remember to check under 'Settings' menu how many players will be and set few properties for each before you press 'Play' button.<br>

<b>START NODEJS SERVER</b><br>
If you don't have any server where to place this game, I provided and very simple server with NodeJS that will host the game.<br>
It's one of the lightest server solutions I studied so far.<br>
If you don't have already installed, it require just few steps to be configured and ready to lunch.<br>
First go to https://nodejs.org/ and download the installer for your OS.<br>
Now you will have a new set of command lines to use but for this game you'll need only of the comman <i>node</i>.<br>
Second, open your shell (Windows: Start - type 'cmd'), go to the folder where you downloaded 'Gotcha' and type <i>node server.js</i>.<br>
Now the server is ready (by default <i>localhost:8000</i>), so you can play the game on your browser.<br>

<b>WHY A WEB SERVER</b><br>
Due to enable pixel perfect collision between bitmaps on the canvas it's necessary to to use canvas.getImageData() to access to the data contained in each pixel of the image to check for alfa transparency.<br>
If the images are loaded for another domain than the modern browsers will trigger this error: <i>Uncaught An error has occurred. This is most likely due to security restrictions on reading canvas pixel data with local or cross-domain images</i>.<br>
The reason is well explained at https://developer.mozilla.org/en-US/docs/Web/HTML/CORS_enabled_image.<br>
This error occurs also when you use images load from local path, for example like 'file://path/image.png'.<br>
